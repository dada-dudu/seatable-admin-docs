# Custom root certificates

Usually we use let's encrypt to generate valid certificates for public access. Nethertheless caddy provides an easy way to use custom certificates. This article assumes that you want to use a valid certificate (or a wildcard certificate) from a trusted authority.

!!! warning "Self signed certificates are not fully supported"

    The usage of a self signed certificate is not recommended. Even if you clients (browsers) trust the certificate, the docker containers does not trust each other. Python Pipeline will not work etc...

## Make certificates available to caddy

In caddy.yml we create by default a volume that mounts the host filesystem from /opt/caddy to /data/caddy. Consequently you should save your certificate files in the folder `/opt/caddy` to make it available to caddy.

In the following text, we assume that your certificates were saved as `cert.pem` and `key.pem`.

```bash
/opt/caddy
├── cert.pem
├── key.pem
```

## Configure SeaTable Container to use these custom certificates

The next step is quite easy. The used caddy container from [lucaslorentz](https://github.com/lucaslorentz/caddy-docker-proxy) supports dynamic configuration with labels.

It is not recommended to make changes to the provides `seatable-server.yml`. Create a custom yml file and reference it in your .env file. Then add the following line to tell caddy to use your custom certificates.

```bash
# configuration of custom-seatable-server.yml
services:
  seatable-server:
    ...
    labels:
      caddy: ${SEATABLE_SERVER_HOSTNAME}
      caddy.tls: "/data/caddy/cert.pem /data/caddy/key.pem" # <-- labels to use custom certificates
```

## Self-signed certificates generated by Caddy

Even if it is not recommended, it is possible to ask Caddy to use self-signed certificates.
This can be achieved by adding these lines to your `custom-seatable-server.yml`.

```bash
# configuration of custom-seatable-server.yml
services:
  seatable-server:
    ...
    labels:
      caddy: ${SEATABLE_SERVER_HOSTNAME}
      caddy.tls: "internal"
```

## Problems with local IP

The current setup does not allow that you add a local IP adress as `SEATABLE_SERVER_HOSTNAME` in your .env file. There are two alternatives that we recommend to use:

#### use local address

Instead of the IP adress you should use an address like `seatable.local`. This requires that you either use a self-signed certificate or a custom root certificate.

#### use nip.io

There is a free service <https://nip.io> which allows mapping any IP Address to a hostname using the following formats:

- 10.0.0.1.nip.io maps to 10.0.0.1
- 192-168-1-250.nip.io maps to 192.168.1.250
- 0a000803.nip.io maps to 10.0.8.3

So if you want to use the local address like `192.168.17.20`, you should use `192.168.17.20.nip.io` as `SEATABLE_SERVER_HOSTNAME`.
